import"./style-CL7nvpj_.js";const _=document.querySelector("#deconnexion"),s=document.querySelector("#out");_?.addEventListener("click",async c=>{c.preventDefault(),await fetch("/api/deconnexion",{method:"POST",credentials:"same-origin"}),window.location.replace("/connexion")});(async()=>{const c=document.querySelector("#cards"),p=await fetch("/api/users",{method:"GET",credentials:"include"});if(!p.ok)return window.location.replace("/connexion");const v=(await p.json()).data||[];for(const e of v){const n=document.createElement("div");n.className="card",n.id=`card${e.id}`;const d=document.createElement("div");d.className="card-firstname",d.textContent=`${e.firstname}`;const i=document.createElement("div");i.className="card-name",i.textContent=`${e.name}`;const r=document.createElement("div");r.className="card-id",r.textContent=`id : ${e.id}`;const l=document.createElement("div");l.className="card-email",l.textContent=`${e.email}`;const t=document.createElement("button");t.className="card-is_approved",t.textContent=`Profile approuvé : ${e.is_approved}`,t.classList.add(e.is_approved?"is-true":"is-false"),t.addEventListener("click",async f=>{f.preventDefault();const x={is_approved:!e.is_approved},u=await fetch(`/api/admin/set_approved/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)}),o=await u.json();if(u.ok){t.textContent=`Profile approuvé : ${o.data.is_approved}`,e.is_approved=o.data.is_approved,t.classList.remove("is-true","is-false"),t.classList.add(e.is_approved?"is-true":"is-false"),s&&(s.textContent=o.message);return}else{s&&(s.textContent=o.message);return}});const a=document.createElement("div");a.className="card-role",a.textContent=`Role : ${e.role}`,a.classList.add(e.role==="admin"?"role-admin":"role-user");const m=document.createElement("button");m.className="card-button_delete",m.textContent="Suppression",n.append(r,d,i,l,t,a,m),c?.appendChild(n)}})();
