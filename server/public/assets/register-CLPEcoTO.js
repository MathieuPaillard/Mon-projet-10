import"./style-CL7nvpj_.js";const r=document.querySelector("#registerForm"),e=document.querySelector("#out"),n=document.querySelector("#buttonRegister");console.log("main.ts chargé");fetch("/api/ping").then(t=>t.json()).then(t=>console.log("ping =",t)).catch(t=>console.error("ping failed",t));if(!r)throw new Error("Form introuvable");r.addEventListener("submit",async t=>{t.preventDefault(),n&&(n.disabled=!0);const o=new FormData(r),s={name:String(o.get("name")??""),firstname:String(o.get("firstname")??""),email:String(o.get("email")??""),password:String(o.get("password")??"")};e&&(e.textContent="Requête en cours.");const i=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(i.ok){const a=await i.json();e&&(e.textContent=`${a.message}`),n&&(n.disabled=!0),setTimeout(()=>{e&&(e.textContent="Vous allez être redirigé sur la page de connexion."),setTimeout(()=>{window.location.replace("/connexion")},3e3)},1500)}else{const a=await i.json();e&&(e.textContent=`${a.message}`),n&&(n.disabled=!1)}});
